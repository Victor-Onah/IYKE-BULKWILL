"use strict";(()=>{var e={};e.id=963,e.ids=[963,888,660],e.modules={9819:(e,t,a)=>{a.r(t),a.d(t,{config:()=>j,default:()=>f,getServerSideProps:()=>v,getStaticPaths:()=>y,getStaticProps:()=>g,reportWebVitals:()=>w,routeModule:()=>C,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>k,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>_});var r={};a.r(r),a.d(r,{default:()=>Cart,getStaticProps:()=>getStaticProps});var l=a(7093),s=a(5244),o=a(1323),i=a(1207),n=a(8234),c=a(997),d=a(6689),u=a(2964),m=a(968),p=a.n(m),x=a(1664),b=a.n(x),h=a(231);let getStaticProps=function(){return{props:{appAuthToken:"$2b$10$DwcQnmA7g6FbBTzDnL9IfOQqafDd7Ka7SIDuAzbMMUskoGCO0206G"}}};function Cart({appAuthToken:e}){let{state:t,dispatch:a}=(0,d.useContext)(u.I),[r,l]=(0,d.useState)(!1);function removeItemFromCart({currentTarget:e}){let{id:t}=e?.dataset;a({type:"remove_from_cart",payload:t})}function increaseQuantity({currentTarget:e}){let{id:t}=e?.dataset;a({type:"increase_quantity_by_1",payload:t})}function decreaseQuantity({currentTarget:e}){let{id:t}=e?.dataset;a({type:"decrease_quantity_by_1",payload:t})}async function placeOrder(r){r.preventDefault();let s=document.querySelectorAll(".form-input"),o={customerContact:[],products:[],dateCreated:new Date().getTime(),totalItems:0,totalUniqueItems:t.cart.length},i=document.querySelector("#submit-btn");for(let e of(i.setAttribute("disabled","true"),i.textContent="Please wait...",s))switch(e.name){case"name":if(!e.value.match(/^[a-zA-Z'_-]{4,}/))return alert("Please make sure to enter a valid name.");o.customerContact[0]=e.value.trim();break;case"email":if(!e.value.match(/^[a-z0-9.]{4,}@[a-z0-9.]{3,}.[a-z]{2,}/))return alert("Please make sure to enter a valid email.");o.customerContact[1]=e.value.trim();break;case"phone-number":if(!e.value.match(/^(0|\+234)[0-9]{10}/))return alert("Please make sure to enter a valid phone number.");o.customerContact[2]=e.value.trim()}for(let e of t.cart)o.totalItems+=e.quantity;try{let t=await fetch("/api/order",{method:"POST",headers:{"X-Application-Authorization-Token":e,"Content-Type":"application/json"},body:JSON.stringify(o)});if(!(await t.json()).success)return alert("Unable to complete request at this time. Please try again later.");alert("Your order was placed successfully, and you will be contacted via the media handles you provided."),a({type:"clear_cart"}),l(!1)}catch(e){console.error(e),alert("Unable to complete request at this time. Please try again later."),i.removeAttribute("disabled")}}return(0,d.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("cart"));e&&a({type:"add_to_cart_bulk",payload:e})},[]),(0,c.jsxs)("div",{className:"",children:[0===t.cart.length?"":c.jsx("h1",{className:"text-center font-semibold text-2xl my-4 text-gray-600",children:"Cart"}),c.jsx("div",{children:0===t.cart.length?(0,c.jsxs)("div",{children:[c.jsx("h3",{className:"text-center font-semibold text-lg text-gray-600 mt-2",children:"No items in cart"}),c.jsx(b(),{className:"text-blue-500 text-center w-fit block my-2 mx-auto",href:"/listings",children:"Go to Listings"})]}):t.cart.map(e=>(0,c.jsxs)("div",{className:"flex gap-2 mb-4 hover:shadow-lg items-start rounded-lg p-2",children:[c.jsx("img",{className:"max-w-[100px] object-cover flex justify-center items-center aspect-square rounded",src:e.imageUrl,height:100,width:100,alt:e.name}),(0,c.jsxs)("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-semibold capitalize",children:e.name}),(0,c.jsxs)("div",{className:"flex gap-1 my-2 w-full max-w-[300px]",children:[c.jsx("button",{onClick:increaseQuantity,"data-id":e._id,className:"bg-green-500 py-1 px-2 font-bold flex justify-center items-center hover:scale-105 active:scale-95 rounded",children:"+"}),c.jsx("input",{"data-id":e._id,onChange:e=>{a({type:"set_product_quantity",payload:{id:e.target.dataset.id,quantity:"NaN"==e.target.value?1:Number(e.target.value)}})},className:"w-[70%] hover:outline-none border-black border-2 rounded px-2 py-1",value:e.quantity,type:"text"}),c.jsx("button",{onClick:decreaseQuantity,"data-id":e._id,className:"bg-yellow-500 py-1 px-2 font-bold flex justify-center items-center hover:scale-105 active:scale-95 rounded",children:"-"})]}),c.jsx("div",{children:(0,c.jsxs)("button",{onClick:removeItemFromCart,"data-id":e._id,className:"bg-red-500 text-white py-1 px-2 text-sm font-semibold flex gap-1 items-center justify-center rounded-sm w-fit mr-0 ml-auto hover:scale-105 active:scale-95",children:[c.jsx(h.Xm5,{})," Remove"]})})]})]},e._id))}),t.cart.length>0?(0,c.jsxs)("div",{children:[c.jsx("button",{onClick:()=>l(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-md w-full max-w-[400px] m-auto block mb-4 hover:scale-105 active:scale-95",children:"Place order"}),c.jsx("button",{onClick:()=>{confirm("You're about to clear your cart. Do you wish to continue?")&&(a({type:"clear_cart"}),localStorage.removeItem("cart"))},className:"bg-red-100 text-red-500 px-4 py-2 rounded-md w-full max-w-[400px] m-auto block mb-4 hover:scale-105 active:scale-95",children:"Clear cart"})]}):"",r&&c.jsx("div",{className:"fixed top-0 left-0 w-full p-4 bottom-0 z-[100] flex justify-center items-center",style:{backdropFilter:"blur(10px)"},children:(0,c.jsxs)("div",{className:"p-4 rounded h-fit bg-white w-full max-w-[600px] relative shadow-lg",children:[c.jsx("h2",{className:"text-center text-lg text-gray-600 text-bold",children:"Complete Order"}),c.jsx("button",{onClick:()=>l(!1),className:"text-sm bg-slate-100 absolute flex justify-center items-center w-8 h-8 rounded-full top-2 right-2 hover:bg-slate-300 active:scale-95",children:c.jsx(h.JqX,{})}),(0,c.jsxs)("form",{onSubmit:placeOrder,className:"w-full my-8 flex flex-col gap-2 max-w-[400px] mx-auto",children:[c.jsx("input",{className:"form-input border-2 border-black rounded px-4 py-2",name:"name",placeholder:"Name",type:"text"}),c.jsx("input",{className:"form-input border-2 border-black rounded px-4 py-2",name:"email",type:"email",placeholder:"Email"}),c.jsx("input",{className:"form-input border-2 border-black rounded px-4 py-2",name:"phone-number",placeholder:"Phone number",type:"tel"}),c.jsx("button",{id:"submit-btn",className:"bg-blue-500 text-white px-4 py-2 rounded-md w-full max-w-[400px] m-auto block mb-4 hover:scale-105 active:scale-95 disabled:opacity-75",children:"Complete your order"})]})]})})]})}Cart.getLayout=function(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(p(),{children:[c.jsx("meta",{name:"robots",content:"no index, no follow"}),c.jsx("title",{children:"Cart"})]}),c.jsx(u.Z,{children:e})]})};let f=(0,o.l)(r,"default"),g=(0,o.l)(r,"getStaticProps"),y=(0,o.l)(r,"getStaticPaths"),v=(0,o.l)(r,"getServerSideProps"),j=(0,o.l)(r,"config"),w=(0,o.l)(r,"reportWebVitals"),_=(0,o.l)(r,"unstable_getStaticProps"),S=(0,o.l)(r,"unstable_getStaticPaths"),N=(0,o.l)(r,"unstable_getStaticParams"),P=(0,o.l)(r,"unstable_getServerProps"),k=(0,o.l)(r,"unstable_getServerSideProps"),C=new l.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/listings/cart",pathname:"/listings/cart",bundlePath:"",filename:""},components:{App:n.default,Document:i.default},userland:r})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[761,432,859,450,234,207,964],()=>__webpack_exec__(9819));module.exports=a})();