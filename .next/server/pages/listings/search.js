"use strict";(()=>{var e={};e.id=578,e.ids=[578,888,660],e.modules={29:(e,t,a)=>{a.r(t),a.d(t,{config:()=>_,default:()=>f,getServerSideProps:()=>S,getStaticPaths:()=>j,getStaticProps:()=>b,reportWebVitals:()=>v,routeModule:()=>k,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>q,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>P});var s={};a.r(s),a.d(s,{default:()=>Search,getStaticProps:()=>getStaticProps});var r=a(7093),l=a(5244),i=a(1323),c=a(1207),o=a(8234),d=a(997),n=a(968),u=a.n(n),p=a(6689),x=a(2964),g=a(231),m=a(1163),h=a(7700);let getStaticProps=()=>({props:{appAuthToken:"$2b$10$DwcQnmA7g6FbBTzDnL9IfOQqafDd7Ka7SIDuAzbMMUskoGCO0206G"}});function Search({appAuthToken:e}){let{state:t,dispatch:a}=(0,p.useContext)(x.I),{query:s}=(0,m.useRouter)(),[r,l]=(0,p.useState)([]),[i,c]=(0,p.useState)(!0),[o,n]=(0,p.useState)("pending");function addToCart({currentTarget:e}){let{id:t}=e.dataset;a({type:"add_to_cart",payload:{...r.find(e=>e._id===t),quantity:1}})}return(0,p.useEffect)(()=>{c(!0),n("pending"),fetch(`/api/search?q=${s.q}&page=1`,{headers:{"X-Application-Authorization-Token":e}}).then(e=>e.json()).then(e=>{l(e),n("successful"),c(!1)}).catch(e=>{console.log(e),n("failed"),c(!1)})},[s]),(0,d.jsxs)(d.Fragment,{children:[d.jsx(u(),{children:(0,d.jsxs)("title",{children:["Search - ",s.q]})}),(0,d.jsxs)("div",{children:[d.jsx("div",{className:"mb-6"}),d.jsx("div",{className:`${"successful"===o&&"grid"} grid-cols-4 gap-y-2 gap-x-4 max-[750px]:grid-cols-3 max-[500px]:grid-cols-2 max-[250px]:grid-cols-1`,children:i?d.jsx("p",{className:"font-semibold text-slate-300 text-center",children:"Loading..."}):"failed"===o?d.jsx("p",{className:"font-semibold text-slate-300 text-center",children:"Failed to load products"}):"all"===t.currentCategory?r.map(e=>(0,d.jsxs)("div",{"data-id":e._id,className:"hover:shadow-lg p-2 h-fit",children:[d.jsx("img",{alt:e.name,src:e.imageUrl,height:150,width:150,loading:"lazy",className:"block aspect-square align-center object-cover w-full"}),d.jsx("p",{className:"font-semibold text-sm capitalize",children:e.name}),d.jsx("div",{className:"flex gap-1 flex-col",children:(0,d.jsxs)("button",{onClick:addToCart,"data-id":e._id,className:"flex-grow flex items-center justify-center gap-1 text-sm px-2 py-1 rounded bg-blue-700 w-full text-white font-semibold active:scale-95",children:[d.jsx(g.rI6,{})," Add to cart"]})})]},e._id)):r.filter(e=>e.category===t.currentCategory).map(e=>(0,d.jsxs)("div",{"data-id":e._id,className:"hover:shadow-lg p-2 h-fit",children:[d.jsx("img",{alt:e.name,src:e.imageUrl,height:150,width:150,loading:"lazy",className:"block aspect-square align-center object-cover w-full"}),d.jsx("p",{className:"font-semibold text-sm",children:e.name}),d.jsx("div",{className:"flex gap-1 flex-col",children:(0,d.jsxs)("button",{onClick:addToCart,"data-id":e._id,className:"flex-grow flex items-center justify-center gap-1 text-sm px-2 py-1 rounded bg-blue-700 w-full text-white font-semibold active:scale-95",children:[d.jsx(g.rI6,{})," Add to cart"]})})]},e._id))}),t.fetchingMoreProducts[2]||d.jsx(g.fCD,{className:"m-auto text-zinc-600"})]})]})}Search.getLayout=e=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(u(),{children:[d.jsx("title",{children:"Search"}),d.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,d.jsxs)(x.Z,{children:[e,d.jsx(h.Z,{})]})]});let f=(0,i.l)(s,"default"),b=(0,i.l)(s,"getStaticProps"),j=(0,i.l)(s,"getStaticPaths"),S=(0,i.l)(s,"getServerSideProps"),_=(0,i.l)(s,"config"),v=(0,i.l)(s,"reportWebVitals"),P=(0,i.l)(s,"unstable_getStaticProps"),w=(0,i.l)(s,"unstable_getStaticPaths"),q=(0,i.l)(s,"unstable_getStaticParams"),N=(0,i.l)(s,"unstable_getServerProps"),y=(0,i.l)(s,"unstable_getServerSideProps"),k=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/listings/search",pathname:"/listings/search",bundlePath:"",filename:""},components:{App:o.default,Document:c.default},userland:s})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[761,432,859,450,234,207,354,700],()=>__webpack_exec__(29));module.exports=a})();