"use strict";(()=>{var e={};e.id=45,e.ids=[45,888,660],e.modules={1320:(e,t,s)=>{s.r(t),s.d(t,{config:()=>j,default:()=>h,getServerSideProps:()=>b,getStaticPaths:()=>y,getStaticProps:()=>_,reportWebVitals:()=>P,routeModule:()=>C,unstable_getServerProps:()=>L,unstable_getServerSideProps:()=>k,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>w});var a={};s.r(a),s.d(a,{default:()=>Listings,getStaticProps:()=>getStaticProps});var r=s(7093),i=s(5244),o=s(1323),c=s(1207),n=s(2173),l=s(997),d=s(6689),u=s(968),p=s.n(u),g=s(2964),m=s(231),x=s(1664),f=s.n(x);let getStaticProps=()=>({props:{appAuthToken:"$2b$10$DwcQnmA7g6FbBTzDnL9IfOQqafDd7Ka7SIDuAzbMMUskoGCO0206G"}});function Listings({appAuthToken:e}){let{state:t,dispatch:s}=(0,d.useContext)(g.I);function addToCart({currentTarget:e}){let{id:a}=e.dataset;s({type:"add_to_cart",payload:t.products.find(e=>e._id===a)})}return(0,d.useEffect)(()=>{let a=1;async function getInitialProducts(){try{let t=await fetch("/api/listings?page=1",{headers:{"X-Application-Authorization-Token":e}});if(401===t.status||500===t.status){s({type:"set_product_fetch_status",payload:"failed"});return}let a=await t.json();s({type:"set_products",payload:[...a]})}catch(e){console.log(e),s({type:"set_product_fetch_status",payload:"failed"})}}async function getMoreProducts(){if(t.fetchingMoreProducts[2]||"failed"===t.fetchingMoreProducts[1]||"success"===t.fetchingMoreProducts[1])try{s({type:"set_more_products",payload:{category:t.currentCategory,status:"pending",finished:!1}});let r=await fetch(`/api/listings?page=${a++}&category=${t.currentCategory}`,{headers:{"X-Application-Authorization-Token":e}});if(401===r.status||500===r.status){s({type:"set_more_products",payload:{category:t.currentCategory,status:"failed",finished:!0}});return}let i=await r.json();s({type:"set_more_products",payload:{category:t.currentCategory,status:"success",data:[...i],finished:!0}})}catch(e){console.log(e),s({type:"set_product_fetch_status",payload:"failed"})}}function scroll(){if(document.documentElement.scrollHeight-(window.scrollY+this.window.innerHeight)<=300){console.log("True"),getMoreProducts();return}}return window.addEventListener("scroll",scroll),getInitialProducts(),()=>{window.removeEventListener("scroll",scroll)}},[]),(0,l.jsxs)("div",{children:[l.jsx("div",{className:"mb-6"}),l.jsx("div",{className:`${"success"===t.productFetchStatus&&"grid"} grid-cols-4 gap-y-2 gap-x-4 max-[750px]:grid-cols-3 max-[500px]:grid-cols-2 max-[250px]:grid-cols-1`,children:t.fetchingProducts?l.jsx("p",{className:"font-semibold text-slate-300 text-center",children:"Loading..."}):"failed"===t.productFetchStatus?l.jsx("p",{className:"font-semibold text-slate-300 text-center",children:"Failed to load products"}):t.products.map(e=>(0,l.jsxs)("div",{"data-id":e._id,className:"hover:shadow-lg p-2 h-fit",children:[l.jsx("img",{alt:e.name,src:e.imageUrl,height:150,width:150,loading:"lazy",className:"block aspect-square align-center object-cover w-full"}),l.jsx("small",{className:"font-semibold",children:e.name}),(0,l.jsxs)("p",{className:"font-bold",children:[l.jsx("sub",{children:"â‚¦"}),e.price]}),(0,l.jsxs)("div",{className:"flex gap-1 flex-col",children:[(0,l.jsxs)("button",{onClick:addToCart,"data-id":e._id,className:"flex-grow flex items-center justify-center gap-1 text-sm px-2 py-1 rounded bg-blue-500 w-full text-white font-semibold active:scale-95",children:[l.jsx(m.rI6,{})," Add to cart"]}),l.jsx(f(),{className:"text-[12px] bg-slate-200 rounded px-2 py-1 text-center",href:`/listings/${e._id}`,children:"View product"})]})]},e._id))}),t.fetchingMoreProducts[2]||l.jsx(m.fCD,{className:"m-auto text-zinc-600"})]})}Listings.getLayout=function(e){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p(),{children:[l.jsx("title",{children:"Product Listings | IYKE-BULKWILL"}),l.jsx("meta",{name:"description",content:"Check out our listings to see our exclusive offers"}),l.jsx("meta",{name:"og:title",content:"IYKE_BULKWILL - Product Listings"}),l.jsx("meta",{name:"og:description",content:"Check out our listings to see our exclusive offers"}),l.jsx("meta",{name:"og:image",content:"https://iyke-bulkwill.com/images/og_image.png"}),l.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),l.jsx("meta",{name:"twitter:title",content:"Product Listings | IYKE-BULKWILL"}),l.jsx("meta",{name:"twitter:description",content:"Check out our listings to see our exclusive offers"}),l.jsx("meta",{name:"twitter:image",content:"https://iyke-bulkwill.com/images/og_image.png"})]}),l.jsx(g.Z,{children:e})]})};let h=(0,o.l)(a,"default"),_=(0,o.l)(a,"getStaticProps"),y=(0,o.l)(a,"getStaticPaths"),b=(0,o.l)(a,"getServerSideProps"),j=(0,o.l)(a,"config"),P=(0,o.l)(a,"reportWebVitals"),w=(0,o.l)(a,"unstable_getStaticProps"),S=(0,o.l)(a,"unstable_getStaticPaths"),v=(0,o.l)(a,"unstable_getStaticParams"),L=(0,o.l)(a,"unstable_getServerProps"),k=(0,o.l)(a,"unstable_getServerSideProps"),C=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/listings",pathname:"/listings",bundlePath:"",filename:""},components:{App:n.default,Document:c.default},userland:a})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[761,432,859,450,173,207,964],()=>__webpack_exec__(1320));module.exports=s})();