"use strict";(()=>{var e={};e.id=45,e.ids=[45,888,660],e.modules={1320:(e,t,s)=>{s.r(t),s.d(t,{config:()=>j,default:()=>y,getServerSideProps:()=>b,getStaticPaths:()=>P,getStaticProps:()=>_,reportWebVitals:()=>v,routeModule:()=>L,unstable_getServerProps:()=>q,unstable_getServerSideProps:()=>I,unstable_getStaticParams:()=>k,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>w});var r={};s.r(r),s.d(r,{default:()=>Listings,getStaticProps:()=>getStaticProps});var a=s(7093),i=s(5244),o=s(1323),n=s(1207),l=s(8234),c=s(997),d=s(6689),u=s(968),p=s.n(u),g=s(2964),m=s(231),f=s(7700),x=s(5675),h=s.n(x);let getStaticProps=()=>({props:{appAuthToken:"$2b$10$DwcQnmA7g6FbBTzDnL9IfOQqafDd7Ka7SIDuAzbMMUskoGCO0206G"}});function Listings({appAuthToken:e}){let{state:t,dispatch:s}=(0,d.useContext)(g.I);function addToCart({currentTarget:e}){let{id:r}=e.dataset;s({type:"add_to_cart",payload:{...t.products.find(e=>e._id===r),quantity:1}})}return(0,d.useEffect)(()=>{let r=1;async function getInitialProducts(){try{let r=await fetch(`/api/listings?page=1&category=${t.currentCategory}`,{headers:{"X-Application-Authorization-Token":e}});if(401===r.status||500===r.status){s({type:"set_product_fetch_status",payload:"failed"});return}let a=await r.json();s({type:"set_products",payload:[...a]})}catch(e){console.log(e),s({type:"set_product_fetch_status",payload:"failed"})}}async function getMoreProducts(a){if(t.fetchingMoreProducts[2]||"failed"===t.fetchingMoreProducts[1]||"success"===t.fetchingMoreProducts[1])try{r++,s({type:"set_more_products",payload:{category:a,status:"pending",finished:!1}});let t=await fetch(`/api/listings?page=${r}&category=${a}`,{headers:{"X-Application-Authorization-Token":e}});if(401===t.status||500===t.status){s({type:"set_more_products",payload:{category:a,status:"failed",finished:!0}});return}let i=await t.json();s({type:"set_more_products",payload:{category:a,status:"success",data:[...i],finished:!0}})}catch(e){console.error(e),s({type:"set_product_fetch_status",payload:"failed"})}}function scroll(){if(document.documentElement.scrollHeight-(window.scrollY+this.window.innerHeight)<=300){getMoreProducts(t.currentCategory);return}}return window.addEventListener("scroll",scroll),getInitialProducts(),()=>{window.removeEventListener("scroll",scroll),s({type:"set_products",payload:[]}),r=1}},[t.currentCategory]),(0,c.jsxs)("div",{children:[c.jsx("div",{className:`${"success"===t.productFetchStatus&&"grid"} grid-cols-4 gap-y-2 gap-x-4 max-[750px]:grid-cols-3 max-[500px]:grid-cols-2 max-[250px]:grid-cols-1`,children:t.fetchingProducts?c.jsx("p",{className:"font-semibold text-slate-300 text-center",children:"Loading..."}):"failed"===t.productFetchStatus?c.jsx("p",{className:"font-semibold text-slate-300 text-center",children:"Failed to load products"}):t.products.map(e=>(0,c.jsxs)("div",{"data-id":e._id,className:"hover:shadow-lg p-2 h-fit",children:[c.jsx(h(),{alt:e.name,src:e.imageUrl,height:150,width:150,loading:"lazy",className:"block aspect-square align-center object-cover w-full"}),c.jsx("p",{className:"font-semibold text-sm capitalize",children:e.name}),c.jsx("div",{className:"flex gap-1 flex-col",children:(0,c.jsxs)("button",{onClick:addToCart,"data-id":e._id,className:"flex-grow flex items-center justify-center gap-1 text-sm px-2 py-1 rounded bg-blue-700 w-full text-white font-semibold active:scale-95",children:[c.jsx(m.rI6,{})," Add to cart"]})})]},e._id))}),t.fetchingMoreProducts[2]||c.jsx(m.fCD,{className:"m-auto text-zinc-600"})]})}Listings.getLayout=function(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(p(),{children:[c.jsx("title",{children:"Find Your Perfect Property - Iyke BulkWill Listings"}),c.jsx("meta",{name:"description",content:"Explore a diverse range of real estate listings at Iyke BulkWill. Discover affordable housing, investment opportunities, and dream properties. Start your journey to finding the perfect home today.   "}),c.jsx("meta",{name:"og:title",content:"Find Your Perfect Property - Iyke BulkWill Listings"}),c.jsx("meta",{name:"og:description",content:"Explore a diverse range of real estate listings at Iyke BulkWill. Discover affordable housing, investment opportunities, and dream properties. Start your journey to finding the perfect home today.   "}),c.jsx("meta",{name:"og:image",content:"https://iyke-bulkwill.com/images/og_image.png"}),c.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),c.jsx("meta",{name:"twitter:title",content:"Find Your Perfect Property - Iyke BulkWill Listings"}),c.jsx("meta",{name:"twitter:description",content:"Explore a diverse range of real estate listings at Iyke BulkWill. Discover affordable housing, investment opportunities, and dream properties. Start your journey to finding the perfect home today.   "}),c.jsx("meta",{name:"twitter:image",content:"https://iyke-bulkwill.com/images/og_image.png"}),c.jsx("link",{rel:"canonical",href:"https://iyke-bulkwill.onrender.com/listings"})]}),(0,c.jsxs)(g.Z,{children:[e,c.jsx(f.Z,{})]})]})};let y=(0,o.l)(r,"default"),_=(0,o.l)(r,"getStaticProps"),P=(0,o.l)(r,"getStaticPaths"),b=(0,o.l)(r,"getServerSideProps"),j=(0,o.l)(r,"config"),v=(0,o.l)(r,"reportWebVitals"),w=(0,o.l)(r,"unstable_getStaticProps"),S=(0,o.l)(r,"unstable_getStaticPaths"),k=(0,o.l)(r,"unstable_getStaticParams"),q=(0,o.l)(r,"unstable_getServerProps"),I=(0,o.l)(r,"unstable_getServerSideProps"),L=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/listings",pathname:"/listings",bundlePath:"",filename:""},components:{App:l.default,Document:n.default},userland:r})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[761,432,859,510,675,234,207,354,700],()=>__webpack_exec__(1320));module.exports=s})();