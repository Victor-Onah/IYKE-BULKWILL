"use strict";exports.id=354,exports.ids=[354],exports.modules={2964:(e,t,a)=>{a.d(t,{I:()=>n,Z:()=>ListingsLayout});var s=a(997),r=a(6689);function ListingsSideNav(){let{state:e,dispatch:t}=(0,r.useContext)(n);function changeCategory(e){let{category:a}=e.target?.dataset,s=document.querySelectorAll(".category-btn");t({type:"set_current_category",payload:a}),s.forEach(e=>e.classList.remove("bg-blue-700","text-white")),e.target.classList.add("bg-blue-700","text-white")}return(0,s.jsxs)("aside",{className:"lg:sticky top-[77px] lg:float-left left-4 h-fit bottom-4 shadow-lg p-4 overflow-auto lg:w-[350px] bg-white",children:[s.jsx("div",{}),(0,s.jsxs)("section",{className:"mt-8",children:[s.jsx("h2",{className:"font-bold text-lg text-slate-700",children:"Categories"}),(0,s.jsxs)("div",{className:"mt-2 flex flex-wrap lg:flex-col justify-start items-start gap-2 overflow-auto",children:[s.jsx("button",{onClick:changeCategory,"data-category":"all",className:"px-2 text-[12px] py-1 whitespace-nowrap block text-center text-sm font-semibold bg-blue-700 text-white rounded-full border-2 border-blue-700 category-btn",children:"All"}),s.jsx("button",{onClick:changeCategory,"data-category":"solar panels",className:"px-2 text-[12px] py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-700 category-btn",children:"Solar Panels"}),s.jsx("button",{onClick:changeCategory,"data-category":"cctvs",className:"px-2 text-[12px] py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-700 category-btn",children:"CCTVs"}),s.jsx("button",{onClick:changeCategory,"data-category":"security lights",className:"px-2 text-[12px] py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-700 category-btn",children:"Security Lights"}),s.jsx("button",{onClick:changeCategory,"data-category":"phones",className:"px-2 text-[12px] py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-700 category-btn",children:"Phones"}),s.jsx("button",{onClick:changeCategory,"data-category":"laptops",className:"px-2 text-[12px] py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-700 category-btn",children:"Laptops"}),s.jsx("button",{onClick:changeCategory,"data-category":"home lights",className:"px-2 text-[12px] py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-700 category-btn",children:"Home Lights"}),s.jsx("button",{onClick:changeCategory,"data-category":"real estate",className:"px-2 text-[12px] py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-700 category-btn",children:"Real Estate"})]})]})]})}function ListingsBanners(){return(0,r.useEffect)(()=>{let e=document.getElementById("banners"),t=document.querySelectorAll(".banner").length,a=e.scrollWidth/t,s=1,r=setInterval(()=>(s>t&&(s=1),e.scrollTo(a*(s-1),0),s++,()=>{clearInterval(r)}),3e3);return()=>{clearInterval(r)}},[]),(0,s.jsxs)("div",{id:"banners",className:"flex overflow-hidden aspect-[3/1]",children:[(0,s.jsxs)("div",{className:"banner min-w-full h-full w-full flex items-center relative justify-center",children:[s.jsx("img",{className:"block align-middle object-cover",src:"/images/phones.jpg",alt:"Phones on display",height:350,width:1020}),s.jsx("h2",{style:{textShadow:"0 0 10px #333333aa"},className:"font-bold text-center text-white text-3xl absolute",children:"Phones and Accessories"})]}),(0,s.jsxs)("div",{className:"banner min-w-full h-full w-full flex items-center relative justify-center",children:[s.jsx("img",{className:"block align-middle object-cover",src:"/images/laptops.jpg",alt:"Phones on display",height:350,width:1020}),s.jsx("h2",{style:{textShadow:"0 0 10px #333333aa"},className:"font-bold text-center text-white text-3xl absolute",children:"Laptops"})]}),(0,s.jsxs)("div",{className:"banner min-w-full h-full w-full flex items-center relative justify-center",children:[s.jsx("img",{className:"block align-middle object-cover",src:"/images/commercial_solar_panels.jpg",alt:"Phones on display",height:350,width:1020}),s.jsx("h2",{style:{textShadow:"0 0 10px #333333aa"},className:"font-bold text-center text-white text-3xl absolute",children:"Solar Panel"})]})]})}var l=a(1163),o=a(231);function SearchBar({appAuthToken:e}){let[t,a]=(0,r.useState)([]),[c,n]=(0,r.useState)(""),i=(0,l.useRouter)();async function getSuggestions(t=c){try{let s=await fetch(`/api/search/suggestions?q=${t.trim().toLowerCase()}`,{headers:{"X-Application-Authorization-Token":e}}),r=await s.json();a(r)}catch(e){console.log(e)}}return(0,r.useEffect)(()=>{n(i.query.q?i.query.q:"")},[i.query]),(0,s.jsxs)("div",{className:"w-full shadow-lg mb-4 rounded-md relative",children:[(0,s.jsxs)("form",{className:"flex w-full p-4 gap-2",children:[s.jsx("input",{type:"text",className:"flex-grow border-2 border-black px-2 py-1 rounded focus:outline-none min-w-0",placeholder:"Search for products",value:c,onChange:({target:e})=>{n(e.value),getSuggestions(e.value)},onBlur:e=>setTimeout(()=>a([]),300),required:!0,id:"search-input"}),s.jsx("button",{type:"submit",onClick:e=>{e.preventDefault(),i.push(`/listings/search?q=${c}`),document.getElementById("search-input").blur()},"aria-label":"Search button",className:"bg-blue-700 text-white rounded whitespace-nowrap px-4 py-2 flex justify-center items-center gap-2",children:s.jsx(o.XPI,{})})]}),t.length>0?s.jsx("div",{className:"absolute top-20 z-30 rounded shadow-lg bg-white left-0 w-full flex flex-col overflow-x-clip overflow-y-auto max-h-44",children:t.map(e=>s.jsx("small",{onClick:()=>i.push(`/listings/search?q=${e}`),className:"flex-grow p-4 hover:bg-slate-200",children:e}))}):""]})}let c={fetchingProducts:!0,productFetchStatus:"pending",products:[],fetchingAutoComplete:!1,autoCompleteFetchStatus:"pending",autoComplete:[],fetchingSearchResults:!1,searchResultsStatus:"pending",searchResults:[],fetchingMoreProducts:["all","pending",!0],moreProducts:[],currentCategory:"all",cart:[]};function reducer(e,t){switch(t.type){case"set_autocomplete":return{...e,autoCompleteFetchStatus:"success",autoComplete:t.payload,fetchingAutoComplete:!1};case"set_current_category":return{...e,currentCategory:t.payload};case"set_autocomplete_fetch_status":return{...e,autoCompleteFetchStatus:t.payload};case"set_more_products":if("failed"===t.payload.status)return{...e,fetchingMoreProducts:[t.payload.category,t.payload.status,!0]};if("pending"===t.payload.status)return{...e,fetchingMoreProducts:[t.payload.category,t.payload.status,!1]};return{...e,products:[...e.products,...t.payload.data],fetchingMoreProducts:[t.payload.category,t.payload.status,t.payload.finished]};case"set_product_fetch_status":return{...e,productFetchStatus:t.payload};case"set_products":return{...e,products:t.payload,productFetchStatus:"success",fetchingProducts:!1};case"set_search_results":return{...e,searchResults:t.payload,searchResultsStatus:"success",fetchingSearchResults:!1};case"set_search_results_fetch_status":return{...e,searchResultsStatus:t.payload};case"add_to_cart":let{payload:a}=t,s=e.cart.findIndex(e=>e._id===a._id);if(-1===s)return{...e,cart:[...e.cart,a]};e.cart[s].quantity++;let r=[...e.cart];return{...e,cart:r};case"add_to_cart_bulk":return{...e,cart:[...t.payload]};case"clear_cart":return localStorage.setItem("cart",JSON.stringify([])),{...e,cart:[]};case"remove_from_cart":let l=e.cart.filter(e=>e._id!=t.payload);return localStorage.setItem("cart",JSON.stringify(l)),{...e,cart:l};case"decrease_quantity_by_1":let o=e.cart.findIndex(e=>e._id==t.payload);return e.cart[o].quantity>1&&e.cart[o].quantity--,localStorage.setItem("cart",JSON.stringify(e.cart)),{...e};case"increase_quantity_by_1":let c=[...e.cart],n=c.findIndex(e=>e._id==t.payload);return e.cart[n].quantity++,localStorage.setItem("cart",JSON.stringify(c)),{...e,cart:c};case"set_product_quantity":let i=e.cart.findIndex(e=>e._id===t.payload.id);if(i>-1){if(Number.isNaN(t.payload.quantity)||0==t.payload.quantity)return e.cart[i].quantity=1,localStorage.setItem("cart",JSON.stringify(e.cart)),{...e};return e.cart[i].quantity=t.payload.quantity,localStorage.setItem("cart",JSON.stringify(e.cart)),{...e}}default:return e}}let n=(0,r.createContext)({state:c,dispatch:e=>{}});function ListingsLayout({children:e}){let[t,a]=(0,r.useReducer)(reducer,c);return s.jsx(n.Provider,{value:{state:t,dispatch:a},children:(0,s.jsxs)("div",{className:"mt-4 lg:mt-[77px] relative max-w-6xl mx-auto pb-4",children:[s.jsx(ListingsSideNav,{}),(0,s.jsxs)("main",{className:"lg:ml-[370px] p-4 bg-white shadow-lg mb-4",children:[s.jsx(SearchBar,{}),s.jsx(ListingsBanners,{}),s.jsx("div",{children:e})]}),s.jsx("div",{className:"clear-both"})]})})}}};