"use strict";exports.id=964,exports.ids=[964],exports.modules={2964:(e,t,l)=>{l.d(t,{I:()=>o,Z:()=>ListingsLayout});var n=l(997),s=l(6689);function ListingsSideNav(){let[e,t]=(0,s.useState)([4e4,6e4]);return(0,s.useEffect)(()=>{let e=document.getElementById("price-range-slider"),l=document.getElementById("price-range-slider-slide"),n=document.getElementById("price-range-slider-btn-1"),s=document.getElementById("price-range-slider-btn-2"),r=e.clientWidth,i=l.clientWidth,a=e.getBoundingClientRect().left,o=(e.clientWidth,0),d=l.getBoundingClientRect().left+i,c=l.getBoundingClientRect().left,u=document.getElementById("input-1"),h=document.getElementById("input-2");function grabSliderBtn1ByMouse({pageX:t}){i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,d=t,n.addEventListener("mousemove",moveSliderBtn1ByMouse)}function moveSliderBtn1ByMouse({pageX:e}){let t=e-d;if(o+i+t>=r){l.style.width=`${r-o}px`,updatePriceRange();return}l.style.width=`${i+t}px`,updatePriceRange()}function releaseSliderBtn1({pageX:t}){i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,d=t,n.removeEventListener("mousemove",moveSliderBtn1ByMouse)}function grabSliderBtn1ByTouch({touches:t}){i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,d=t[0].clientX,n.addEventListener("touchmove",moveSliderBtn1ByTouch)}function moveSliderBtn1ByTouch({touches:e}){let t=e[0].clientX-d;if(o+i+t>=r){l.style.width=`${r-o}px`,updatePriceRange(),d=e[0].clientX;return}l.style.width=`${i+t}px`,updatePriceRange()}function releaseSliderBtn1ByTouch({touches:t}){i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,n.removeEventListener("touchmove",moveSliderBtn1ByTouch)}function grabSliderBtn2ByMouse({pageX:t}){i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,c=t,s.addEventListener("mousemove",moveSliderBtn2ByMouse)}function moveSliderBtn2ByMouse({pageX:e}){l.style.marginLeft=`${e-a<0?0:e-a}px`,l.style.width=`${i-(e-c)>r?r:i-(e-c)}px`,updatePriceRange()}function releaseSliderBtn2({pageX:t}){i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,c=l.getBoundingClientRect().left,s.removeEventListener("mousemove",moveSliderBtn2ByMouse)}function grabSliderBtn2ByTouch({touches:t}){i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,c=t[0].pageX,s.addEventListener("touchmove",moveSliderBtn2ByTouch)}function moveSliderBtn2ByTouch({touches:e}){l.style.marginLeft=`${e[0].pageX-a<0?0:e[0].pageX-a}px`,l.style.width=`${i-(e[0].pageX-c)>r?r:i-(e[0].pageX-c)}px`,updatePriceRange()}function releaseSliderBtn2ByTouch(){i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,c=l.getBoundingClientRect().left,s.removeEventListener("touchmove",moveSliderBtn2ByTouch)}function updateSlider(){l.style.marginLeft=`${Number(u.value)*(r/5e5)<0?0:Number(u.value)*(r/5e5)}px`,l.style.width=`${(Number(h.value)-Number(u.value))*(r/5e5)<=0?0:(Number(h.value)-Number(u.value))*(r/5e5)+o>r?r-o:(Number(h.value)-Number(u.value))*(r/5e5)}px`,i=l.clientWidth,r=e.clientWidth,a=e.getBoundingClientRect().left,e.clientWidth,o=l.getBoundingClientRect().left-a,c=l.getBoundingClientRect().left}function updatePriceRange(){o=l.getBoundingClientRect().left-a,t([Math.floor(5e5/r*o),Math.floor((l.clientWidth+o)/(r/5e5))])}function updatePriceRange2(){updateSlider()}function updatePriceRange1(){updateSlider()}return updateSlider(),n.addEventListener("mousedown",grabSliderBtn1ByMouse),n.addEventListener("mouseup",releaseSliderBtn1),n.addEventListener("mouseleave",releaseSliderBtn1),n.addEventListener("touchstart",grabSliderBtn1ByTouch),n.addEventListener("touchend",releaseSliderBtn1ByTouch),n.addEventListener("touchcancel",releaseSliderBtn1ByTouch),s.addEventListener("mousedown",grabSliderBtn2ByMouse),s.addEventListener("mouseup",releaseSliderBtn2),s.addEventListener("mouseleave",releaseSliderBtn2),s.addEventListener("touchstart",grabSliderBtn2ByTouch),s.addEventListener("touchend",releaseSliderBtn2ByTouch),s.addEventListener("touchcancel",releaseSliderBtn2ByTouch),u.addEventListener("keyup",updatePriceRange1),h.addEventListener("keyup",updatePriceRange2),()=>{n.removeEventListener("mousedown",grabSliderBtn1ByMouse),n.removeEventListener("mouseup",releaseSliderBtn1),n.removeEventListener("mouseleave",releaseSliderBtn1),n.removeEventListener("touchstart",grabSliderBtn1ByTouch),n.removeEventListener("touchend",releaseSliderBtn1ByTouch),n.removeEventListener("touchcancel",releaseSliderBtn1ByTouch),s.removeEventListener("mousedown",grabSliderBtn2ByMouse),s.removeEventListener("mouseup",releaseSliderBtn2),s.removeEventListener("mouseleave",releaseSliderBtn2),s.removeEventListener("touchstart",grabSliderBtn2ByTouch),s.removeEventListener("touchend",releaseSliderBtn2ByTouch),s.removeEventListener("touchcancel",releaseSliderBtn2ByTouch),u.removeEventListener("keyup",updatePriceRange1),h.removeEventListener("keyup",updatePriceRange2)}},[]),(0,n.jsxs)("aside",{className:"lg:sticky top-[77px] lg:float-left left-4 h-fit bottom-4 shadow-lg p-4 overflow-auto lg:w-[350px] bg-white",children:[n.jsx("div",{}),(0,n.jsxs)("section",{className:"mt-8",children:[n.jsx("h2",{className:"font-bold text-lg text-slate-700",children:"Categories"}),(0,n.jsxs)("ul",{className:"mt-2 flex lg:flex-wrap gap-2 overflow-auto",children:[n.jsx("li",{className:"px-2 py-1 whitespace-nowrap block text-center text-sm font-semibold bg-blue-500 text-white rounded-full border-2 border-blue-500",children:"All"}),n.jsx("li",{className:"px-2 py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-500",children:"Solar Panels"}),n.jsx("li",{className:"px-2 py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-500",children:"CCTVs"}),n.jsx("li",{className:"px-2 py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-500",children:"Security Lighs"}),n.jsx("li",{className:"px-2 py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-500",children:"Phones"}),n.jsx("li",{className:"px-2 py-1 whitespace-nowrap block text-center text-sm font-semibold rounded-full border-2 border-blue-500",children:"Laptops"})]})]}),(0,n.jsxs)("section",{className:"mt-8",children:[n.jsx("h2",{className:"font-bold text-lg text-slate-700",children:"Prices Ranges"}),(0,n.jsxs)("ul",{className:"mt-2 flex lg:flex-wrap gap-2 overflow-auto",children:[(0,n.jsxs)("li",{className:"border-2 whitespace-nowrap border-blue-500 rounded-full font-semibold px-2 py-1",children:[n.jsx("b",{children:"N"}),"1, 000 - ",n.jsx("b",{children:"N"}),"20, 000"]}),(0,n.jsxs)("li",{className:"border-2 whitespace-nowrap border-blue-500 rounded-full font-semibold px-2 py-1 bg-blue-500 text-white",children:[n.jsx("b",{children:"N"}),"20, 000 - ",n.jsx("b",{children:"N"}),"40, 000"]}),(0,n.jsxs)("li",{className:"border-2 whitespace-nowrap border-blue-500 rounded-full font-semibold px-2 py-1",children:[n.jsx("b",{children:"N"}),"40, 000 - ",n.jsx("b",{children:"N"}),"60, 000"]})]}),n.jsx("h4",{className:"font-semibold text-slate-700 mt-2",children:"Select a custom price range"}),(0,n.jsxs)("div",{className:" flex flex-wrap gap-4 items-center","aria-hidden":"true",children:[n.jsx("div",{id:"price-range-slider",className:"h-2 w-full max-w-[250px] bg-zinc-300 mt-2 rounded-full",children:(0,n.jsxs)("div",{id:"price-range-slider-slide",className:"bg-sky-500 w-1/2 h-full rounded-full relative",children:[n.jsx("span",{id:"price-range-slider-btn-1",className:"h-4 w-4 absolute hover:scale-[200%] rounded-full bg-blue-500 shadow-lg top-1/2 -translate-y-1/2 -translate-x-1/2 left-full hover:bg-blue-800 active:bg-blue-700"}),n.jsx("span",{id:"price-range-slider-btn-2",className:"h-4 w-4 absolute hover:scale-[200%] rounded-full bg-blue-500 shadow-lg top-1/2 -translate-y-1/2 right-full translate-x-1/2 hover:bg-blue-800 active:bg-blue-700"})]})}),(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[n.jsx("input",{id:"input-1",onChange:l=>{t([l.target.value,e[1]])},max:5e5,min:0,value:e[0],className:"border border-[1px] rounded block max-w-[100px] p-2 text-sm outline-blue-500 focus:border-none",type:"number"})," ","-",n.jsx("input",{id:"input-2",onChange:l=>{t([e[0],l.target.value])},min:e[0],value:e[1],className:"border border-[1px] rounded block max-w-[100px] p-2 text-sm outline-blue-500 focus:border-none",type:"number"})]})]})]})]})}function ListingsBanners(){return(0,s.useEffect)(()=>{let e=document.getElementById("banners"),t=document.querySelectorAll(".banner").length,l=e.scrollWidth/t,n=1,s=setInterval(()=>(n>t&&(n=1),e.scrollTo(l*(n-1),0),n++,()=>{clearInterval(s)}),3e3);return()=>{clearInterval(s)}},[]),(0,n.jsxs)("div",{id:"banners",className:"flex overflow-hidden aspect-[3/1]",children:[(0,n.jsxs)("div",{className:"banner min-w-full h-full w-full flex items-center relative justify-center",children:[n.jsx("img",{className:"block align-middle object-cover",src:"/images/phones.jpg",alt:"Phones on display",height:350,width:1020}),n.jsx("h2",{style:{textShadow:"0 0 10px #333333aa"},className:"font-bold text-center text-white text-3xl absolute",children:"Phones and Accessories"})]}),(0,n.jsxs)("div",{className:"banner min-w-full h-full w-full flex items-center relative justify-center",children:[n.jsx("img",{className:"block align-middle object-cover",src:"/images/laptops.jpg",alt:"Phones on display",height:350,width:1020}),n.jsx("h2",{style:{textShadow:"0 0 10px #333333aa"},className:"font-bold text-center text-white text-3xl absolute",children:"Laptops"})]}),(0,n.jsxs)("div",{className:"banner min-w-full h-full w-full flex items-center relative justify-center",children:[n.jsx("img",{className:"block align-middle object-cover",src:"/images/commercial_solar_panels.jpg",alt:"Phones on display",height:350,width:1020}),n.jsx("h2",{style:{textShadow:"0 0 10px #333333aa"},className:"font-bold text-center text-white text-3xl absolute",children:"Solar Panel"})]})]})}var r=l(1163),i=l(231);function SearchBar({appAuthToken:e}){let[t,l]=(0,s.useState)([]),[a,o]=(0,s.useState)(""),d=(0,r.useRouter)();async function getSuggestions(t=a){try{let n=await fetch(`/api/search/suggestions?q=${t.trim().toLowerCase()}`,{headers:{"X-Application-Authorization-Token":e}}),s=await n.json();l(s)}catch(e){console.log(e)}}return(0,n.jsxs)("div",{className:"w-full shadow-lg mb-4 rounded-md relative",children:[(0,n.jsxs)("div",{className:"flex w-full p-4 gap-2",children:[n.jsx("input",{type:"text",className:"flex-grow border-2 border-black px-2 py-1 rounded",placeholder:"Search for products",value:a,onChange:({target:e})=>{o(e.value),getSuggestions(e.value)},onBlur:e=>setTimeout(()=>l([]),300)}),n.jsx("button",{onClick:()=>d.push(`/listings/search?q=${a}`),className:"bg-blue-500 text-white rounded whitespace-nowrap px-4 py-2 flex justify-center items-center gap-2",children:n.jsx(i.XPI,{})})]}),t.length>0?n.jsx("div",{className:"absolute top-20 z-30 rounded shadow-lg bg-white left-0 w-full flex flex-col overflow-x-clip overflow-y-auto max-h-44",children:t.map(e=>n.jsx("small",{onClick:()=>d.push(`/listings/search?q=${e}`),className:"flex-grow p-4 hover:bg-slate-200",children:e}))}):""]})}let a={fetchingProducts:!0,productFetchStatus:"pending",products:[],fetchingAutoComplete:!1,autoCompleteFetchStatus:"pending",autoComplete:[],fetchingSearchResults:!1,searchResultsStatus:"pending",searchResults:[],fetchingMoreProducts:["all","pending",!0],moreProducts:[],currentCategory:"all",priceRange:[4e4,6e4],cart:[]};function reducer(e,t){switch(t.type){case"set_autocomplete":return{...e,autoCompleteFetchStatus:"success",autoComplete:t.payload,fetchingAutoComplete:!1};case"set_current_category":return{...e,currentCategory:t.payload};case"set_price_range":return{...e,priceRange:t.payload};case"set_autocomplete_fetch_status":return{...e,autoCompleteFetchStatus:t.payload};case"set_more_products":if("failed"===t.payload.status)return{...e,fetchingMoreProducts:[t.payload.category,t.payload.status,!0]};if("pending"===t.payload.status)return{...e,fetchingMoreProducts:[t.payload.category,t.payload.status,!1]};return{...e,products:[...e.products,...t.payload.data],fetchingMoreProducts:[t.payload.category,t.payload.status,t.payload.finished]};case"set_product_fetch_status":return{...e,productFetchStatus:t.payload};case"set_products":return{...e,products:t.payload,productFetchStatus:"success",fetchingProducts:!1};case"set_search_results":return{...e,searchResults:t.payload,searchResultsStatus:"success",fetchingSearchResults:!1};case"set_search_results_fetch_status":return{...e,searchResultsStatus:t.payload};case"add_to_cart":return{...e,cart:[...e.cart,t.payload]};default:return e}}let o=(0,s.createContext)({state:a,dispatch:e=>{}});function ListingsLayout({children:e}){let[t,l]=(0,s.useReducer)(reducer,a);return n.jsx(o.Provider,{value:{state:t,dispatch:l},children:(0,n.jsxs)("div",{className:"mt-4 lg:mt-[77px] relative max-w-6xl mx-auto pb-4",children:[n.jsx(ListingsSideNav,{}),(0,n.jsxs)("main",{className:"lg:ml-[370px] p-4 bg-white shadow-lg mb-4",children:[n.jsx(SearchBar,{}),n.jsx(ListingsBanners,{}),n.jsx("div",{children:e})]}),n.jsx("div",{className:"clear-both"})]})})}}};