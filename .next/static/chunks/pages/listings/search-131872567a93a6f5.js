(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578],{7932:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/listings/search",function(){return s(4816)}])},4816:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return m},default:function(){return Search}});var n=s(5893),a=s(9008),i=s.n(a),c=s(7294),o=s(2964),l=s(2684),r=s(1664),d=s.n(r),u=s(1163),m=!0;function Search(e){let{appAuthToken:t}=e,{state:s,dispatch:a}=(0,c.useContext)(o.I),{query:i}=(0,u.useRouter)(),[r,m]=(0,c.useState)([]),[x,g]=(0,c.useState)(!0),[h,f]=(0,c.useState)("pending");function addToCart(e){let{currentTarget:t}=e,{id:n}=t.dataset;a({type:"add_to_cart",payload:s.products.find(e=>e._id===n)})}return(0,c.useEffect)(()=>{g(!0),f("pending"),fetch("/api/search?q=".concat(i.q,"&page=1"),{headers:{"X-Application-Authorization-Token":t}}).then(e=>e.json()).then(e=>{m(e),f("successful"),g(!1)}).catch(e=>{console.log(e),f("failed"),g(!1)})},[i]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-6"}),(0,n.jsx)("div",{className:"".concat("successful"===h&&"grid"," grid-cols-4 gap-y-2 gap-x-4 max-[750px]:grid-cols-3 max-[500px]:grid-cols-2 max-[250px]:grid-cols-1"),children:x?(0,n.jsx)("p",{className:"font-semibold text-slate-300 text-center",children:"Loading..."}):"failed"===h?(0,n.jsx)("p",{className:"font-semibold text-slate-300 text-center",children:"Failed to load products"}):r.map(e=>(0,n.jsxs)("div",{"data-id":e._id,className:"hover:shadow-lg p-2 h-fit",children:[(0,n.jsx)("img",{alt:e.name,src:e.imageUrl,height:150,width:150,loading:"lazy",className:"block aspect-square align-center object-cover w-full"}),(0,n.jsx)("small",{className:"font-semibold",children:e.name}),(0,n.jsxs)("p",{className:"font-bold",children:["N",e.price]}),(0,n.jsxs)("div",{className:"flex gap-1 flex-col",children:[(0,n.jsxs)("button",{onClick:addToCart,"data-id":e._id,className:"flex-grow flex items-center justify-center gap-1 text-sm px-2 py-1 rounded bg-blue-500 w-full text-white font-semibold active:scale-95",children:[(0,n.jsx)(l.rI6,{})," Add to cart"]}),(0,n.jsx)(d(),{className:"text-[12px] bg-slate-200 rounded px-2 py-1 text-center",href:"/listings/".concat(e._id),children:"View product"})]})]},e._id))}),s.fetchingMoreProducts[2]||(0,n.jsx)(l.fCD,{className:"m-auto text-zinc-600"})]})}Search.getLayout=e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:"Product Listings | IYKE-BULKWILL"}),(0,n.jsx)("meta",{name:"description",content:"Check out our listings to see our exclusive offers"}),(0,n.jsx)("meta",{name:"og:title",content:"IYKE_BULKWILL - Product Listings"}),(0,n.jsx)("meta",{name:"og:description",content:"Check out our listings to see our exclusive offers"}),(0,n.jsx)("meta",{name:"og:image",content:"https://iyke-bulkwill.com/images/og_image.png"}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{name:"twitter:title",content:"Product Listings | IYKE-BULKWILL"}),(0,n.jsx)("meta",{name:"twitter:description",content:"Check out our listings to see our exclusive offers"}),(0,n.jsx)("meta",{name:"twitter:image",content:"https://iyke-bulkwill.com/images/og_image.png"})]}),(0,n.jsx)(o.Z,{children:e})]})}},function(e){e.O(0,[714,736,172,774,888,179],function(){return e(e.s=7932)}),_N_E=e.O()}]);