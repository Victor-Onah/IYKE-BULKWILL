(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578],{7932:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/listings/search",function(){return s(4816)}])},4816:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return u},default:function(){return Search}});var a=s(5893),i=s(9008),n=s.n(i),c=s(7294),l=s(2964),o=s(2684),r=s(1163),d=s(7700),u=!0;function Search(e){let{appAuthToken:t}=e,{state:s,dispatch:i}=(0,c.useContext)(l.I),{query:d}=(0,r.useRouter)(),[u,m]=(0,c.useState)([]),[x,g]=(0,c.useState)(!0),[f,h]=(0,c.useState)("pending");function addToCart(e){let{currentTarget:t}=e,{id:s}=t.dataset;i({type:"add_to_cart",payload:{...u.find(e=>e._id===s),quantity:1}})}return(0,c.useEffect)(()=>{g(!0),h("pending"),fetch("/api/search?q=".concat(d.q,"&page=1"),{headers:{"X-Application-Authorization-Token":t}}).then(e=>e.json()).then(e=>{m(e),h("successful"),g(!1)}).catch(e=>{console.log(e),h("failed"),g(!1)})},[d]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{children:(0,a.jsxs)("title",{children:["Search - ",d.q]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6"}),(0,a.jsx)("div",{className:"".concat("successful"===f&&"grid"," grid-cols-4 gap-y-2 gap-x-4 max-[750px]:grid-cols-3 max-[500px]:grid-cols-2 max-[250px]:grid-cols-1"),children:x?(0,a.jsx)("p",{className:"font-semibold text-slate-300 text-center",children:"Loading..."}):"failed"===f?(0,a.jsx)("p",{className:"font-semibold text-slate-300 text-center",children:"Failed to load products"}):"all"===s.currentCategory?u.map(e=>(0,a.jsxs)("div",{"data-id":e._id,className:"hover:shadow-lg p-2 h-fit",children:[(0,a.jsx)("img",{alt:e.name,src:e.imageUrl,height:150,width:150,loading:"lazy",className:"block aspect-square align-center object-cover w-full"}),(0,a.jsx)("p",{className:"font-semibold text-sm capitalize",children:e.name}),(0,a.jsx)("div",{className:"flex gap-1 flex-col",children:(0,a.jsxs)("button",{onClick:addToCart,"data-id":e._id,className:"flex-grow flex items-center justify-center gap-1 text-sm px-2 py-1 rounded bg-blue-500 w-full text-white font-semibold active:scale-95",children:[(0,a.jsx)(o.rI6,{})," Add to cart"]})})]},e._id)):u.filter(e=>e.category===s.currentCategory).map(e=>(0,a.jsxs)("div",{"data-id":e._id,className:"hover:shadow-lg p-2 h-fit",children:[(0,a.jsx)("img",{alt:e.name,src:e.imageUrl,height:150,width:150,loading:"lazy",className:"block aspect-square align-center object-cover w-full"}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:e.name}),(0,a.jsx)("div",{className:"flex gap-1 flex-col",children:(0,a.jsxs)("button",{onClick:addToCart,"data-id":e._id,className:"flex-grow flex items-center justify-center gap-1 text-sm px-2 py-1 rounded bg-blue-500 w-full text-white font-semibold active:scale-95",children:[(0,a.jsx)(o.rI6,{})," Add to cart"]})})]},e._id))}),s.fetchingMoreProducts[2]||(0,a.jsx)(o.fCD,{className:"m-auto text-zinc-600"})]})]})}Search.getLayout=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:"Product Listings | IYKE-BULKWILL"}),(0,a.jsx)("meta",{name:"description",content:"Check out our listings to see our exclusive offers"}),(0,a.jsx)("meta",{name:"og:title",content:"Search | Find exclusive offers and affordable pricing - Iyke Bulkwill"}),(0,a.jsx)("meta",{name:"og:description",content:"Check out our listings to see our exclusive offers"}),(0,a.jsx)("meta",{name:"og:image",content:"https://iyke-bulkwill.com/images/og_image.png"}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:title",content:"Search | Find exclusive offers and affordable pricing - Iyke Bulkwill"}),(0,a.jsx)("meta",{name:"twitter:description",content:"Check out our listings to see our exclusive offers"}),(0,a.jsx)("meta",{name:"twitter:image",content:"https://iyke-bulkwill.com/images/og_image.png"})]}),(0,a.jsxs)(l.Z,{children:[e,(0,a.jsx)(d.Z,{})]})]})}},function(e){e.O(0,[12,774,888,179],function(){return e(e.s=7932)}),_N_E=e.O()}]);