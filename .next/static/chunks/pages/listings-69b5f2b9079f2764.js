(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{9145:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/listings",function(){return s(2118)}])},2118:function(t,e,s){"use strict";s.r(e),s.d(e,{__N_SSG:function(){return p},default:function(){return Listings}});var i=s(5893),a=s(7294),n=s(9008),o=s.n(n),r=s(2964),c=s(2684),l=s(7700),d=s(5675),u=s.n(d),p=!0;function Listings(t){let{appAuthToken:e}=t,{state:s,dispatch:n}=(0,a.useContext)(r.I);function addToCart(t){let{currentTarget:e}=t,{id:i}=e.dataset;n({type:"add_to_cart",payload:{...s.products.find(t=>t._id===i),quantity:1}})}return(0,a.useEffect)(()=>{let t=1;async function getInitialProducts(){try{let t=await fetch("/api/listings?page=1&category=".concat(s.currentCategory),{headers:{"X-Application-Authorization-Token":e}});if(401===t.status||500===t.status){n({type:"set_product_fetch_status",payload:"failed"});return}let i=await t.json();n({type:"set_products",payload:[...i]})}catch(t){console.log(t),n({type:"set_product_fetch_status",payload:"failed"})}}async function getMoreProducts(i){if(s.fetchingMoreProducts[2]||"failed"===s.fetchingMoreProducts[1]||"success"===s.fetchingMoreProducts[1])try{t++,n({type:"set_more_products",payload:{category:i,status:"pending",finished:!1}});let s=await fetch("/api/listings?page=".concat(t,"&category=").concat(i),{headers:{"X-Application-Authorization-Token":e}});if(401===s.status||500===s.status){n({type:"set_more_products",payload:{category:i,status:"failed",finished:!0}});return}let a=await s.json();n({type:"set_more_products",payload:{category:i,status:"success",data:[...a],finished:!0}})}catch(t){console.error(t),n({type:"set_product_fetch_status",payload:"failed"})}}function scroll(){if(document.documentElement.scrollHeight-(window.scrollY+this.window.innerHeight)<=300){getMoreProducts(s.currentCategory);return}}return window.addEventListener("scroll",scroll),getInitialProducts(),()=>{window.removeEventListener("scroll",scroll),n({type:"set_products",payload:[]}),t=1}},[s.currentCategory]),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"".concat("success"===s.productFetchStatus&&"grid"," grid-cols-4 gap-y-2 gap-x-4 max-[750px]:grid-cols-3 max-[500px]:grid-cols-2 max-[250px]:grid-cols-1"),children:s.fetchingProducts?(0,i.jsx)("p",{className:"font-semibold text-slate-300 text-center",children:"Loading..."}):"failed"===s.productFetchStatus?(0,i.jsx)("p",{className:"font-semibold text-slate-300 text-center",children:"Failed to load products"}):s.products.map(t=>(0,i.jsxs)("div",{"data-id":t._id,className:"hover:shadow-lg p-2 h-fit",children:[(0,i.jsx)(u(),{alt:t.name,src:t.imageUrl,height:150,width:150,loading:"lazy",className:"block aspect-square align-center object-cover w-full"}),(0,i.jsx)("p",{className:"font-semibold text-sm capitalize",children:t.name}),(0,i.jsx)("div",{className:"flex gap-1 flex-col",children:(0,i.jsxs)("button",{onClick:addToCart,"data-id":t._id,className:"flex-grow flex items-center justify-center gap-1 text-sm px-2 py-1 rounded bg-blue-700 w-full text-white font-semibold active:scale-95",children:[(0,i.jsx)(c.rI6,{})," Add to cart"]})})]},t._id))}),s.fetchingMoreProducts[2]||(0,i.jsx)(c.fCD,{className:"m-auto text-zinc-600"})]})}Listings.getLayout=function(t){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"Find Your Perfect Property - Iyke BulkWill Listings"}),(0,i.jsx)("meta",{name:"description",content:"Explore a diverse range of real estate listings at Iyke BulkWill. Discover affordable housing, investment opportunities, and dream properties. Start your journey to finding the perfect home today.   "}),(0,i.jsx)("meta",{name:"og:title",content:"Find Your Perfect Property - Iyke BulkWill Listings"}),(0,i.jsx)("meta",{name:"og:description",content:"Explore a diverse range of real estate listings at Iyke BulkWill. Discover affordable housing, investment opportunities, and dream properties. Start your journey to finding the perfect home today.   "}),(0,i.jsx)("meta",{name:"og:image",content:"https://iyke-bulkwill.com/images/og_image.png"}),(0,i.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,i.jsx)("meta",{name:"twitter:title",content:"Find Your Perfect Property - Iyke BulkWill Listings"}),(0,i.jsx)("meta",{name:"twitter:description",content:"Explore a diverse range of real estate listings at Iyke BulkWill. Discover affordable housing, investment opportunities, and dream properties. Start your journey to finding the perfect home today.   "}),(0,i.jsx)("meta",{name:"twitter:image",content:"https://iyke-bulkwill.com/images/og_image.png"}),(0,i.jsx)("link",{rel:"canonical",href:"https://iyke-bulkwill.onrender.com/listings"})]}),(0,i.jsxs)(r.Z,{children:[t,(0,i.jsx)(l.Z,{})]})]})}}},function(t){t.O(0,[959,700,774,888,179],function(){return t(t.s=9145)}),_N_E=t.O()}]);